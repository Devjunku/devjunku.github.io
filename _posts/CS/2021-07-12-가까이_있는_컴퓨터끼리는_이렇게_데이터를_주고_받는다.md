---
title:  "💡네트워크 통신"
excerpt: "Network Communication"

categories:
  - Gitlog
tags:
  - [Gitlog, jekyll, Github, Git, Network Communication, OSI 7 2 layer,ComputerScience]

toc: true
toc_sticky: true
 
date: 2021-07-12
last_modified_at: 2021-07-12
---

# 💡가까이 있는 컴퓨터끼리는 이렇게 데이터를 주고 받는다.

2계층의 역할 현 강의는 local area computer 내에서 어떻게 데이터를 주고 받는지 알아보는 것이 목적임. 이걸 정의한게 `OSI 7 layer의 2계층`임

2계층에서 하는 일: 2계층의 기능, 2계층의 네트워크 크기

2계층에서 사용하는 주소: 물리적인 주소, MAC 주소

2계층 프로토콜: Ethernet 프로토콜 ✓

반드시 알아야할 것: `2, 3, 4`계층에서 사용하는 주소체계

## 2계층에서 하는 일

2계층은 하나의 네트워크 대역. 즉 같은 네트워크 상에 존재하는 여러 장비들 중에서 어떤 장비가 어떤 장비에게 보내는 데이터를 전달 → 흐름제어(누가 누구에게 보내는지), 오류제어(보내는 데이터에 오류가 있는지 체크)를 수행함

2계층은 하나의 네트워크 대역 LAN에서만 통신할 때 사용한다. 다른 네트워크 통신할 때는 항상 3계층이 도와주어야 한다. 3계층의 주소와 3계층의 프로토콜을 이용하여야만 다른 네트워크와 통신이 가능하다

## 2계층에서 사용하는 주소

LAN에서 통신할 때 사용하는 `MAC 주소` (MAC주소: 물리적인 장비가 부여받은 고유한 주소, 물리적인 주소)

MAC 주소는 16진수로 씀 12개의 16진수로 이루어졌음

6C-29-95-04-EB-A1

| OUI: IEEE에서 부여하는 일종의 제조회사 식별 ID | 고유번호: 제조사에서 부여한 고유번호 |
| :--------------------------------------------: | :----------------------------------: |
|                    6C-29-95                    |               04-EB-A1               |

MAC 주소는 전세계의 모든 장비가 모두 다른 번호를 갖고있다고 한다 (일반적으로 번호는 바뀔 수 없음)

## 2계층의 프로코톨

LAN에서 통신할 때 사용하는 Ethernet 프로토콜, 초록색은 페이로드임

![스크린샷 2021-07-12 오후 6.38.15](../img/스크린샷 2021-07-12 오후 6.38.15.png)

해당 프로토콜은 14byte임 (빨간 박스 안에 있음) 받는 사람 / 보내는 사람의 주소를 Ethernet 프로토콜 위와 같은 사진 안에다가 넣음

출발지 mac 주소 6byte

나머지 2byte![스크린샷 2021-07-12 오후 6.46.33](../img/스크린샷 2021-07-12 오후 6.46.33.png)

이런 형식으로 주소를 적어서 주고 받음 마지막 2byte인 Ethernet Type은 3계층 프로토콜의 성질을 미리 알려주는 것임. Data에 올 수 있는게 IPv4(0800), ARP(0806)이 있음.

## 3계층의 기능

OSI 7 layer

다른 네트워크 대역 즉, 멀리 떨어진 곳에 존재하는 네트워크까지 어떻게 데이터를 전달할지 제어하는 일을 담당, 발신에서 착신까지의 패킷의 경로를 제어(LAN과 LAN을 연결시켜주는 것이 3계층의 역할, 3계층 장비: Router) 멀리 기기가 있으면 IP 주소가 있어야함.

IPv4는 `서브넷 마스크`,` 게이트웨이`가 추가로 꼭! 필요함.

프로토콜: ARP 프로토콜 / WAN에서 통신할 떄 사용하는 IPv4 프로토콜은 v6로 넘어간다고 한다. version이 바뀐다고 해서 v4가 v6이 되는건 아님. 아에 형식 자체가 다름

### 일반적인 IP 주소

IPv4 → 일반적인 주소임 | 필드는 총 4개로 `.`으로 구분 ip주소는 8bit로 표현하고 10진수로 씀.

00000000  → 0

11111111 → 255

따라서 10진수로 255까지

클래스가 여러 개인데 알 필요는 없다고 함. (모른다고 네트워크를 못하진 않음)

A~E 클래스가 있는데, 일단 몰라도 된다고 함.

컴퓨터 보급이 확대되면서, classful한 방식이 사용됨 이게 바로 서브넷 마스크 임(1번째 변화).

그래서 IP는 서브넷 마스크와 같이 쓰임

서브넷 마스크: classful한 네트워크 대역을 나눠주는데 사용하는 값. 어디까지가 네트워크 대역을 구분하는데 사용하고 어디서부터 호스트를 구분하는데 사용하는지 지정

32bit 4byte

255.255.255.192 → 11111111.11111111.11111111.11000000 2진수로 표기했을 때 1로 시작, 1과 1사이에는 0이 올 수 없다는 규칙을 갖고 있다. 1과 0이 바뀌는 그 부분이 대역과 컴퓨터를 구분하고 있음. 이렇게 하므로서 낭비되는 IP대역을 방지할 수 있음. 이러한 과정들이 전부 IPv4로 적용되어 있어서 IPv6로 못넘어갔던거임

그래서 classless한 IP와 공인IP(네트워크 통신망과 연결할 때 사용하는 IP), 사설IP(같은 대역에서 사용하는 IP)를 같이 사용함. 사설 애들이 외부와 통신할 때 공인IP로 변경하여 사용함. IP가 생각보다 많이 얽혀 있음. 따라서 외부에서 볼 때는 사설IP는 구분되지 않음. 그럼 어떻게 찾냐? 그건 공유기가 찾아줌.

이렇게 공인IP ←→ 사설IP로 변경하는 것을 NAT(Network adaptor)라고 함.

공유기를 샀다? → 공인 IP를 산거임

데이터가 나갈 때 패킷 정보와 사설IP를 공유기가 저장함. 근데 그런적 없는 IP가 공유기가 들어오면 그냥 공유기가 받고 끝남. (즉, 관련 없으면 보내주지도 않음.)

이를 통해서 IP공급을 완화시킴

특수한 IP 주소

0.0.0.0 → wildcard 나머지 모든 IP

127.0.0.1 → 나 자신을 나타내는 주소

게이트웨이 주소 → 어딘가로 가려면 일단 여기로! ( 일반적으로 공유기의 IP를 씀 )

---

**이더넷**(영어: **Ethernet**)은 컴퓨터 네트워크 기술의 하나로, 일반적으로 LAN, MAN 및 WAN에서 가장 많이 활용되는 기술 규격이다. ... **이더넷** 기술은 대부분 IEEE 802.3 규약으로 표준화되었다. -위키백과-

